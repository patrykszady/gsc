const L="modulepreload",S=function(e){return"/build/"+e},E={},x=function(t,r,n){let o=Promise.resolve();if(r&&r.length>0){let m=function(s){return Promise.all(s.map(d=>Promise.resolve(d).then(p=>({status:"fulfilled",value:p}),p=>({status:"rejected",reason:p}))))};var l=m;document.getElementsByTagName("link");const u=document.querySelector("meta[property=csp-nonce]"),c=u?.nonce||u?.getAttribute("nonce");o=m(r.map(s=>{if(s=S(s),s in E)return;E[s]=!0;const d=s.endsWith(".css"),p=d?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${s}"]${p}`))return;const h=document.createElement("link");if(h.rel=d?"stylesheet":L,d||(h.as="script"),h.crossOrigin="",h.href=s,c&&h.setAttribute("nonce",c),document.head.appendChild(h),d)return new Promise((C,A)=>{h.addEventListener("load",C),h.addEventListener("error",()=>A(new Error(`Unable to preload CSS for ${s}`)))})}))}function i(u){const c=new Event("vite:preloadError",{cancelable:!0});if(c.payload=u,window.dispatchEvent(c),!c.defaultPrevented)throw u}return o.then(u=>{for(const c of u||[])c.status==="rejected"&&i(c.reason);return t().catch(i)})};function M(e){e.directive("intersect",e.skipDuringClone((t,{value:r,expression:n,modifiers:o},{evaluateLater:i,cleanup:l})=>{let u=i(n),c={rootMargin:_(o),threshold:j(o)},m=new IntersectionObserver(s=>{s.forEach(d=>{d.isIntersecting!==(r==="leave")&&(u(),o.includes("once")&&m.disconnect())})},c);m.observe(t),l(()=>{m.disconnect()})}))}function j(e){if(e.includes("full"))return .99;if(e.includes("half"))return .5;if(!e.includes("threshold"))return 0;let t=e[e.indexOf("threshold")+1];return t==="100"?1:t==="0"?0:+`.${t}`}function W(e){let t=e.match(/^(-?[0-9]+)(px|%)?$/);return t?t[1]+(t[2]||"px"):void 0}function _(e){const t="margin",r="0px 0px 0px 0px",n=e.indexOf(t);if(n===-1)return r;let o=[];for(let i=1;i<5;i++)o.push(W(e[n+i]||""));return o=o.filter(i=>i!==void 0),o.length?o.join(" ").trim():r}var O=M;const a=new Map;window.imageCache=a;const f=[],g=[];let w=!1;function I(e){return!e||a.has(e)?Promise.resolve(a.get(e)||e):new Promise(t=>{const r=new Image;r.onload=()=>{a.set(e,e),t(e)},r.onerror=()=>t(e),r.src=e})}function y(e){return a.has(e)}function v(e,t=!1){const r=t?f:g;e.forEach(n=>{n&&!a.has(n)&&!f.includes(n)&&!g.includes(n)&&r.push(n)}),k()}function P(e){e.forEach(t=>{if(!t||a.has(t))return;const r=g.indexOf(t);r>-1&&g.splice(r,1),f.includes(t)||f.unshift(t)}),k()}function k(){if(w||f.length===0&&g.length===0)return;w=!0;const e=()=>{let t=f.shift();if(t||(t=g.shift()),!t){w=!1;return}if(a.has(t)){requestIdleCallback(e,{timeout:50});return}const r=new Image;r.onload=()=>{a.set(t,t);const n=f.length>0?50:100;requestIdleCallback(e,{timeout:n})},r.onerror=()=>{requestIdleCallback(e,{timeout:100})},r.src=t};requestIdleCallback(e,{timeout:500})}function q(){const e=new Set;return document.querySelectorAll("img[src]").forEach(t=>{t.src&&t.src.startsWith("http")&&e.add(t.src)}),document.querySelectorAll('[x-ref="fullImg"]').forEach(t=>{t.src&&e.add(t.src)}),document.querySelectorAll("img[srcset]").forEach(t=>{const r=t.getAttribute("srcset");r&&r.split(",").forEach(n=>{const o=n.trim().split(" ")[0];o&&o.startsWith("http")&&e.add(o)})}),document.querySelectorAll('[style*="background-image"]').forEach(t=>{const r=t.style.backgroundImage.match(/url\(['"]?([^'"]+)['"]?\)/);r&&r[1]&&e.add(r[1])}),Array.from(e)}function R(){fetch("/api/project-images",{priority:"low",headers:{Accept:"application/json"}}).then(e=>e.json()).then(e=>{Array.isArray(e)&&e.length>0&&v(e,!1)}).catch(()=>{})}function D(e){!e||!e.startsWith("/")&&!e.startsWith(window.location.origin)||fetch(e,{headers:{"X-Requested-With":"XMLHttpRequest"},priority:"low"}).then(t=>t.text()).then(t=>{const n=new DOMParser().parseFromString(t,"text/html"),o=[];n.querySelectorAll("img[src]").forEach(i=>{const l=i.getAttribute("src");l&&(l.startsWith("http")||l.startsWith("/storage"))&&o.push(l.startsWith("/")?window.location.origin+l:l)}),o.length>0&&v(o,!1)}).catch(()=>{})}document.addEventListener("alpine:init",()=>{window.Alpine.plugin(O),window.Alpine.data("lqipImage",(e,t)=>({imageUrl:e,thumbUrl:t,loaded:y(e),init(){y(e)&&(this.loaded=!0)},onLoad(){this.loaded=!0,a.set(e,e)}}))});let b;window.loadProjectZipMap=()=>(b||(b=x(()=>import("./projectZipMap-ChLOyWlN.js"),[])),b);document.addEventListener("DOMContentLoaded",()=>{requestIdleCallback(()=>{const e=q();v(e,!0)},{timeout:500}),requestIdleCallback(()=>{R()},{timeout:3e3}),document.addEventListener("mouseover",e=>{const t=e.target.closest("a[wire\\:navigate], a[wire\\:navigate\\.hover]");if(!t)return;const r=t.getAttribute("href");r&&!t.dataset.prefetched&&(t.dataset.prefetched="true",D(r))}),document.addEventListener("click",e=>{const t=e.target.closest('a[href^="#"]');if(!t)return;const r=t.getAttribute("href");if(!r||r.length<2)return;const n=document.querySelector(r);n&&(e.preventDefault(),n.scrollIntoView({behavior:"smooth",block:"start"}),history.replaceState(null,"",r))})});document.addEventListener("livewire:navigating",()=>{});document.addEventListener("livewire:navigated",()=>{requestIdleCallback(()=>{const e=q();P(e)},{timeout:100})});window.GSCImageCache={preload:I,isCached:y,getCache:()=>a,preloadMultiple:e=>Promise.all(e.map(I)),queuePreload:v,prioritize:P,getQueueStatus:()=>({highPriority:f.length,lowPriority:g.length,cached:a.size})};
