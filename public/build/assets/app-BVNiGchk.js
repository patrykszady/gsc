function u(e){e.directive("intersect",e.skipDuringClone((t,{value:r,expression:a,modifiers:o},{evaluateLater:n,cleanup:c})=>{let i=n(a),s={rootMargin:w(o),threshold:f(o)},l=new IntersectionObserver(m=>{m.forEach(g=>{g.isIntersecting!==(r==="leave")&&(i(),o.includes("once")&&l.disconnect())})},s);l.observe(t),c(()=>{l.disconnect()})}))}function f(e){if(e.includes("full"))return .99;if(e.includes("half"))return .5;if(!e.includes("threshold"))return 0;let t=e[e.indexOf("threshold")+1];return t==="100"?1:t==="0"?0:+`.${t}`}function y(e){let t=e.match(/^(-?[0-9]+)(px|%)?$/);return t?t[1]+(t[2]||"px"):void 0}function w(e){const t="margin",r="0px 0px 0px 0px",a=e.indexOf(t);if(a===-1)return r;let o=[];for(let n=1;n<5;n++)o.push(y(e[a+n]||""));return o=o.filter(n=>n!==void 0),o.length?o.join(" ").trim():r}var b=u;const d=new Map;window.imageCache=d;function p(e){return!e||d.has(e)?Promise.resolve(d.get(e)||e):new Promise(t=>{const r=new Image;r.onload=()=>{d.set(e,e),t(e)},r.onerror=()=>t(e),r.src=e})}function h(e){return d.has(e)}document.addEventListener("alpine:init",()=>{window.Alpine.plugin(b),window.Alpine.data("lqipImage",(e,t)=>({imageUrl:e,thumbUrl:t,loaded:h(e),init(){h(e)&&(this.loaded=!0)},onLoad(){this.loaded=!0,d.set(e,e)}})),window.Alpine.data("projectZipMap",(e,t,r)=>({map:null,geocoder:null,circles:[],animationId:null,initialized:!1,async init(){if(this.initialized||(this.initialized=!0,await this.waitForGoogleMaps(),!window.google?.maps?.importLibrary))return;const{Map:a}=await google.maps.importLibrary("maps");await google.maps.importLibrary("geocoding"),this.map=new a(this.$refs.map,{center:r,zoom:10,mapTypeControl:!1,streetViewControl:!1,fullscreenControl:!1,zoomControl:!1,gestureHandling:"cooperative",draggable:!1,scrollwheel:!1,keyboardShortcuts:!1,minZoom:9,maxZoom:15,styles:[{elementType:"geometry",stylers:[{color:"#f4f6f9"}]},{elementType:"labels.text.fill",stylers:[{color:"#4b5563"}]},{elementType:"labels.text.stroke",stylers:[{color:"#f4f6f9"}]},{featureType:"administrative",elementType:"geometry.stroke",stylers:[{color:"#d1d5db"}]},{featureType:"poi",elementType:"geometry",stylers:[{color:"#eef2f7"}]},{featureType:"poi",elementType:"labels.text.fill",stylers:[{color:"#6b7280"}]},{featureType:"road",elementType:"geometry",stylers:[{color:"#ffffff"}]},{featureType:"road",elementType:"geometry.stroke",stylers:[{color:"#e5e7eb"}]},{featureType:"road",elementType:"labels.text.fill",stylers:[{color:"#6b7280"}]},{featureType:"water",elementType:"geometry",stylers:[{color:"#1e3a5f"}]},{featureType:"water",elementType:"labels.text.fill",stylers:[{color:"#f4f6f9"}]}]}),this.geocoder=new google.maps.Geocoder,await this.renderZipCircles(e,Math.max(t,1)),this.startPulseAnimation()},startPulseAnimation(){this.animationId&&cancelAnimationFrame(this.animationId);let a=0;const o=()=>{a+=.05,this.circles.forEach((n,c)=>{const i=a+c*.6,s=Math.sin(i),l=1+s*.08;n.setRadius(n.baseRadius*l);const m=.3+s*.05;n.setOptions({fillOpacity:m})}),this.animationId=requestAnimationFrame(o)};this.animationId=requestAnimationFrame(o)},async renderZipCircles(a,o){this.circles.forEach(i=>i.setMap(null)),this.circles=[];const c=(await Promise.all(a.map(async i=>{const s=await this.geocodeZip(i.zip);return s?{...i,location:s}:null}))).filter(Boolean);if(c.forEach(i=>{const l=2e3+Math.sqrt(i.count/o)*8e3,m=new google.maps.Circle({map:this.map,center:i.location,radius:l,fillColor:"#0ea5e9",fillOpacity:.3,strokeColor:"#0284c7",strokeOpacity:.8,strokeWeight:1});m.baseRadius=l,this.circles.push(m)}),c.length>0){const i=c.reduce((s,l)=>({lat:s.lat+l.location.lat,lng:s.lng+l.location.lng}),{lat:0,lng:0});this.map.setCenter({lat:i.lat/c.length,lng:i.lng/c.length}),this.map.setZoom(11)}},waitForGoogleMaps(){return new Promise(a=>{let o=0;const n=setInterval(()=>{o+=1,(window.google?.maps?.importLibrary||o>20)&&(clearInterval(n),a())},250)})},async geocodeZip(a){const o=this.getCachedZip(a);return o||new Promise(n=>{this.geocoder.geocode({address:`${a} USA`},(c,i)=>{if(i==="OK"&&c[0]){const s=c[0].geometry.location,l={lat:s.lat(),lng:s.lng()};this.setCachedZip(a,l),n(l);return}n(null)})})},getCachedZip(a){try{return JSON.parse(localStorage.getItem("zipGeoCache")||"{}")[a]||null}catch{return null}},setCachedZip(a,o){try{const n=JSON.parse(localStorage.getItem("zipGeoCache")||"{}");n[a]=o,localStorage.setItem("zipGeoCache",JSON.stringify(n))}catch{}}}))});document.addEventListener("DOMContentLoaded",()=>{document.addEventListener("mouseover",e=>{const t=e.target.closest("a[wire\\:navigate], a[wire\\:navigate\\.hover]");if(!t)return;t.getAttribute("href")&&!t.dataset.prefetched&&(t.dataset.prefetched="true")}),document.addEventListener("click",e=>{const t=e.target.closest('a[href^="#"]');if(!t)return;const r=t.getAttribute("href");if(!r||r.length<2)return;const a=document.querySelector(r);a&&(e.preventDefault(),a.scrollIntoView({behavior:"smooth",block:"start"}),history.replaceState(null,"",r))})});document.addEventListener("livewire:navigating",()=>{});document.addEventListener("livewire:navigated",()=>{requestIdleCallback(()=>{document.querySelectorAll('[x-data*="lqipImage"]').forEach(t=>{const r=t.getAttribute("x-data")?.match(/lqipImage\('([^']+)'/);r&&r[1]&&p(r[1])})},{timeout:2e3})});window.GSCImageCache={preload:p,isCached:h,getCache:()=>d,preloadMultiple:e=>Promise.all(e.map(p))};
